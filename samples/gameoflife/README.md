# ライフゲーム
このサンプルはp5.jsを使ってライフゲームを作成するものです。

![ライフゲームのgif画像](/samples/gameoflife/lifegame.gif)

## 必要スキル&知識

- p5.jsの基礎(setup, draw)
- 変数の寿命保持(スコープ)
- 2重ループ
- ２次元配列
- 関数
- 前の値を元に変数を更新(インクリメント、デクリメント)
- 少数の整数化、四捨五入(round, floor, ceil)
- ２つの値を入れ替えるswapアルゴリズム

## ライフゲームとは

> ライフゲーム (Conway's Game of Life[1]) は1970年にイギリスの数学者ジョン・ホートン・コンウェイ (John Horton Conway) が考案した数理モデルである。単純なルールから複雑な結果が生成され、パズルやミニスケープの要素を持っている。生命の誕生、進化、淘汰などのプロセスを連想させるパターンも存在し、シミュレーションゲームと分類される場合がある。

[wikipedia ライフゲームを参照](https://ja.wikipedia.org/wiki/%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B2%E3%83%BC%E3%83%A0)

## ルール

ライフゲームでは初期状態のみでその後の状態が決定される。碁盤のような格子があり、一つの格子はセル（細胞）と呼ばれる。各セルには8つの近傍のセルがある (ムーア近傍) 。各セルには「生」と「死」の2つの状態があり、あるセルの次のステップ（世代）の状態は周囲の8つのセルの今の世代における状態により決定される。

セルの生死は次のルールに従う。

### 誕生
死んでいるセルに隣接する生きたセルがちょうど3つあれば、次の世代が誕生する。

### 生存
生きているセルに隣接する生きたセルが2つか3つならば、次の世代でも生存する。

### 過疎
生きているセルに隣接する生きたセルが1つ以下ならば、過疎により死滅する。

### 過密
生きているセルに隣接する生きたセルが4つ以上ならば、過密により死滅する。

// TODO: ここにサンプルの画像を

## 学ぶ

### ステップ1 readyフォルダを開いて現在の状態を確認しましょう
LivePreviewでreadyフォルダの`index.html`を開く。青い背景のキャンバスが作成されているのを確認しましょう。また`my-p5.js`を開いてソースコードを確認しましょう。

チェックポイント
- createCanvas(720, 400)で720×400のキャンバスを作成しています
- background('#E0F4FF')でカラーコード#E0F4FFの背景色を指定してます

### ステップ2 セルで埋め尽くしましょう
この何もない背景を正方形の細胞(セル)で埋め尽くします。ライフゲームはセルの数が多ければ多いほど面白くなります。今回はセルの１つの幅を20ピクセルとします。

キャンバスに敷き詰めるセルの数は

縦の数 = キャンバスの高さ / 20
横の数 = キャンバスの幅 / 20

となります。今回はキャンバスの高さは400で、幅は720なので

縦の数 = 400 / 20 = 20個
横の数 = 720 / 20 = 36個

と予想できそうですね。

ちなみに縦の数のことを行数とよびrow(ロウ)と書きます。横の数のことをは列数と呼びcolumn(カラム)と書きます。

まずはここまでをコードに書きましょう。

```js

// 変数の宣言
let w; // セルの幅(ピクセル)
let columns; // 列数
let rows; // 行数

function setup() {
  // キャンバスの大きさを720x400ピクセルに指定
  createCanvas(720, 400);
  // 背景色をカラーコード#E0F4FFに指定
  background('#E0F4FF');

  // セルの幅を20ピクセルに指定
  w = 20;

  // 行数の計算
  rows = 400 / w;

  // 列数の計算
  columns = 720 / w;

  // コンソールにcolumnsとrowsの値を出力
  console.log('行数:', rows)
  console.log('列数:', columns)
}

function draw() {

}
```

コンソールにはなんと表示されましたでしょうか？　

次のように表示されていたら成功です。
```
行数: 20
列数: 36
```

さて、次はこれを視覚化します。縦方向に20個、横方向に36個の四角形を敷き詰めるにはどうしたら良いでしょうか？

ちなみに、p5jsで四角形の書き方は次のとおりです。

```js
function draw(){
    // 第一引数: x座標
    // 第二引数: y座標
    // 第三引数: 横幅
    // 第四引数: 縦幅
    rect(20, 20, 100, 100)
}
```

少し時間を作って考えてみてください。

<details>
<summary>ヒント1</summary>
２重ループを使います
</details>

<details>
<summary>ヒント2</summary>

```js
function draw() {
    // 列ループ
    for(let i; i < columns.length; i++){
        // 行ループ
        for(let j; j < rows.length; j++){
            // ここに四角形を描画
        }
    }
}
```

</details>

ヒントは２重ループを使います。

<details>
<summary>すごく長い文章とかプログラムとか
</summary>
<div>

```python
print('Hello world!')
```　
</div>
</details>

```js

// 変数の宣言
let w;　// セルの幅(ピクセル)
let columns; // 列数
let rows; // 行数

function setup() {
  // キャンバスの大きさを720x400ピクセルに指定
  createCanvas(720, 400);
  // 背景色をカラーコード#E0F4FFに指定
  background('#E0F4FF');

  // セルの幅を20ピクセルに指定
  w = 20;

  // 行数の計算
  rows = 400 / w;

  // 列数の計算
  columns = 720 / w;

  // コンソールにcolumnsとrowsの値を出力
  console.log('行数:', rows)
  console.log('列数:' columns)
}

function draw() {

}
```